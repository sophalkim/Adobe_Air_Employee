<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx">
	
	<fx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.validators.Validator;
			
			protected function sbmt_clickHandler(evt:MouseEvent):void {
				var arr:Array = Validator.validateAll(valArr);
				if (arr.length == 0) {
					Alert.show("Form is valid!");
				}
				accordion.selectedIndex=2;
			}
		]]>
	</fx:Script>
	
	<fx:Script>
		<![CDATA[
			import spark.events.IndexChangeEvent;
			
			//this function is called when the selection is going to change
			private function selectionChangingHandler(evt:IndexChangeEvent):void {
				var item:* = list.dataProvider.getItemAt(evt.newIndex);
				if (item.type != "employee") {
					evt.preventDefault();
				}
			}
		]]>
	</fx:Script>

	<fx:Declarations>
		<fx:Array id="valArr">
			<mx:StringValidator id="fNameVal" source="{fName}" property="text" required="true" maxLength="64" />
			<mx:StringValidator id="usrnmVal" source="{usrnm}" property="text" required="true" maxLength="32" />
			<mx:StringValidator id="psswdVal" source="{psswd}" property="text" required="true" maxLength="32" />
			<mx:SocialSecurityValidator id="ssnVal" source="{ssn}" property="text" required="false" />
		</fx:Array>
	</fx:Declarations>
	
	<s:Panel title="Array Interactive"
			 width="100%" height="100%"
			 horizontalCenter="0" verticalCenter="0">
	
	<mx:Accordion id="accordion" width="100%" height="100%">
		<!-- Define each panel using a VBox container. -->
		<mx:VBox label="Employees">
			
			<s:List id="list" changing="selectionChangingHandler(event);">
				<!-- itemRenderer is inline in this sample -->
				<s:itemRenderer>
					<fx:Component>
						<s:ItemRenderer>
							<s:states>
								<s:State name="normal" />
								<s:State name="hovered" />
								<s:State name="selected" />
							</s:states>
							<s:Rect left="0" right="0" top="0" bottom="0">
								<s:fill>
									<s:SolidColor color="0x999999" alpha="0" alpha.hovered="0.2"
												  alpha.selected="0.6" />
								</s:fill>
							</s:Rect>
							<s:Label id="nameLabel" text="{data.lastName}, {data.firstName}" top="5" left="5" right="5" />
							<s:Label y="20" id="phoneLabel" text="{data.phone}" includeIn="selected" top="25" bottom="5" left="5" right="5" />
						</s:ItemRenderer>
					</fx:Component>
				</s:itemRenderer>
				<s:dataProvider>
					<s:ArrayList>
						<fx:Object type="hr" firstName="Ann"  lastName="Green"  />
						<fx:Object type="employee" firstName="Tom"  lastName="Smith" phone="415-155-1212" />
						<fx:Object type="employee" firstName="John" lastName="Black" phone="408-344-1234" />
						<fx:Object type="employee" firstName="Jane" lastName="White" phone="415-235-7878" />
						<fx:Object type="employee" firstName="Bill" lastName="Jones" phone="415-875-7800" />
					</s:ArrayList>
				</s:dataProvider>
			</s:List>
			
		</mx:VBox>
		
		
		
		
		<mx:VBox label="Add Employee">
			<s:Form id="frm" defaultButton="{sbmt}">
				<s:FormHeading label="SPARK FORM" backgroundColor="haloSilver" />
				<s:FormItem sequenceLabel="i)" label="First name:" required="true">
					<s:TextInput id="fName" maxChars="64" />
				</s:FormItem>
				<s:FormItem sequenceLabel="ii)" label="Last name:">
					<s:TextInput id="lName" maxChars="64" />
				</s:FormItem>
				<s:FormItem sequenceLabel="iii)" label="User name:" required="true">
					<s:TextInput id="usrnm" maxChars="32" />
				</s:FormItem>
				<s:FormItem sequenceLabel="iv)" label="Password:" required="true">
					<s:TextInput id="psswd" maxChars="32" displayAsPassword="true" />
				</s:FormItem>
				<s:FormItem sequenceLabel="v)" label="SSN:">
					<s:helpContent>
						<s:Label text="###-##-####" />
					</s:helpContent>
					<s:TextInput id="ssn" maxChars="11" />
				</s:FormItem>
				<s:FormItem>
					<s:Button id="sbmt" label="Submit" click="sbmt_clickHandler(event);" />
				</s:FormItem>
			</s:Form>
		</mx:VBox>
		
		
		
		
		<mx:VBox label="Thank You Page">
			<!--<s:VGroup width="100%" height="100%" verticalAlign="middle" horizontalAlign="center"> 
				<s:Label text="Thank you for Submitting the Form." fontSize="50"/>
			</s:VGroup>-->
			<mx:DataGrid id="employeeList" width="100%" height="100%">
				<mx:columns>
					<mx:DataGridColumn dataField="firstName" headerText="First Name"/>
					<mx:DataGridColumn dataField="lastName" headerText="Last Name"/>
					<mx:DataGridColumn dataField="phone" headerText="Phone"/>
				</mx:columns>
			</mx:DataGrid>
		</mx:VBox>
		
	</mx:Accordion>
		
	</s:Panel>
	
</s:WindowedApplication>
